<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.2.1.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/otherProfile.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
    <script src="/scripts/profile.js"></script>
    <title>Profile</title>
</head>

<body>
    <div id="main">
        <div id="navbar">
            <%- include ('./partials/profileNavbar') %>
        </div>
        <div class="profile">
            <h4 class="name">
                <img src="<%= user.avatar %>" alt="avatar" style="height: 70px; width: 70px; border-radius: 50%;">
                <span>
                    <%= user.name %>
                </span>
            </h4>
            <div>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" id="askTo">
                    Ask Question
                </button>

                <!-- Modal -->
                <div class="modal fade" id="exampleModal" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title text-center" id="exampleModalLabel">Add Question</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form action="/question/askTo/:uid">
                                    <textarea name="questionBody" id="" cols="62" rows="5"></textarea>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-sm btn-outline-dark"
                                    data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-sm btn-outline-success">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-sm btn-outline-danger" id="follow" aid="<%= user.id %>">
                    <%= status %>
                </button>
            </div>
        </div>
        <div class="navWrapper text-center">
            <ul class="nav">
                <li class="nav-item">
                    <button class="btn btn-outline-secondary" id="questions">
                        Questions (<%= user.questionsAsked.length %>)
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-outline-secondary" id="answers">
                        Answers (<%= user.answers.length %>)
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-outline-secondary" id="followers">
                        Followers (<%= user.followers.length %>)
                    </button>
                </li>
                <li class="nav-item">
                    <button class="btn btn-outline-secondary" id="following">
                        Following (<%= user.following.length %>)
                    </button>
                </li>
            </ul>
        </div>
        <div class="custom">
            <div class="wrapper">
                <%- include ('./partials/allQuestions') %>
            </div>
        </div>
    </div>
    <script>
        $("#questions").click(() => {
            $(".wrapper").empty();
            $(".wrapper").append(`<%- include ('./partials/allQuestions') %>`);
        });
        $("#answers").click(() => {
            $(".wrapper").empty();
            $(".wrapper").append(`<%- include ('./partials/allAnswers') %>`);
        });
        $("#followers").click(() => {
            $(".wrapper").empty();
            $(".wrapper").append(`<%- include ('./partials/allFollowers') %>`);
        });
        $("#following").click(() => {
            $(".wrapper").empty();
            $(".wrapper").append(`<%- include ('./partials/allFollowing') %>`);
        });
        $('.answerButton').click(() => {
            $('.answer').toggleClass('visually-hidden')
        })
    </script>
</body>

</html>